<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Index</title>
</head>
<body>
    <header class="cabeçalho">
        <div class="loginECadastro"> 
            <span style="margin-right: 50px;" onclick="funcLogin()">Acesso corretor</span>
        </div>
    </header>
    <div class="conteudo conteudo1" style="background-image: url(assets/fundo_cads2.jpg); background-repeat: no-repeat; background-size: cover;">

        <div class="card esquerda">
        <p class="texto_card"> <span style="font-size: 50px;"> Origem dos seguros: </span> <br> <br>
            Os seguros foram criados antes da época das Grandes Navegações, surgindo como um acordo informal entre os cameleiros, que devido à alta taxa de camelos que morriam durante as travessias dos desertos orientais, eles se propunham a dividir entre os participantes da travessia o valor do animal morto e pagá-lo ao seu dono. 
       <br> Com o avanço das grandes navegações, essa prática se expandiu de maneira similar com as grandes embarcações, criando em 1347, em Gênova, a primeira apólice formal de seguro, que justamente criava um acordo de proteção à embarcação italiana.          </p>
        </div>

        <div class="card meio">
            <p class="texto_card"> <span style="font-size: 50px;"> Seguros na atualidade: </span> <br> <br>
                Atualmente, os seguros são de extrema importância, pois são responsáveis por oferecerem proteção financeira e tranquilidade, protegendo contra riscos inesperados e garantindo a estabilidade financeira em situações de emergência. <br>
                Prova de sua importância, é que no Brasil existem seguros obrigatórios, como, por exemplo, o DPVAT  que visa garantir indenizações a vítimas de acidentes de trânsito ou o Seguro de Responsabilidade Civil para Obras Exigido em muitos contratos públicos e privados para autorizar a execução de obras, cobrindo danos materiais ou corporais a terceiros durante a construção. 
            </p>
            </div>
        
        <div class="card direita">
            <p class="texto_card"> <span style="font-size: 50px;">Principais seguros da atualidade:</span> <br><br> 
                Atualmente, os seguros mais contratados são os de  <span style="color: blue;">automóvel</span> e os de <span style="color: red;"> saúde </span>. O de automóvel <span style="color: blue;">cobre roubo, colisões e danos a terceiros</span>, sendo altamente personalizado: seu valor varia conforme o modelo do carro, perfil do condutor, local de residência e histórico de direção. Já o de saúde, que <span style="color: red;"> protege o seu bem mais valioso — A VIDA —</span>, tem seu custo  definido principalmente pela idade do contratante. Esses dois tipos de seguros mostram como o setor evoluiu, unindo proteção sob medida com acessibilidade para diferentes perfis.</div>

            
        </div>
        </div>


    </div>

    <div class="conteudo conteudo2" style="background-image: url(assets/fund_cotacao.jpg); background-repeat: no-repeat; background-size: cover;">
        <h1 class="titulo_cotacao" style="color: white; margin-top: 1%; font-size: 60px;">Solicite uma cotação</h1>
        
        <div class="card dados" style="justify-self: center;"> 

        <input class="input" type="text" placeholder="Nome de contato" id="ipt_nome"> <br> 
        <input class="input" type="number" placeholder="Numero para contato" id="ipt_celular"> <br>
        <input class="input" type="text" placeholder="E-mail para contato" id="ipt_email"> <br>
        <input class="input"type="text" placeholder="Mensagem da solicitação" id="ipt_mensage"> <br>
        <input class="input"type="number" placeholder="Idade" id="ipt_idade"> <br>
        <button class="input" onclick="enviarCotacao()">Solicitar cotação</button>
        </div>

        <div class="card dados card1" id="card1"> 

        </div>


</body>
</html>


<script>
    var preco1 = ''
    function funcLogin () {
        window.location.href = "login.html"
    }

    function enviarCotacao() {
        var nome = ipt_nome.value;
        var celular = ipt_celular.value;
        var email = ipt_email.value;
        var mensagem = ipt_mensage.value;
        var idade = ipt_idade.value;

if (idade <= 18) {
    preco1 = 'R$ 342,57';
} else if (idade <= 23) {
    preco1 = 'R$ 436,22';
} else if (idade <= 28) {
    preco1 = 'R$ 526,22';
} else if (idade <= 33) {
    preco1 = 'R$ 602,44';
} else if (idade <= 38) {
    preco1 = 'R$ 652,74';
} else if (idade <= 43) {
    preco1 = 'R$ 674,12';
} else if (idade <= 48) {
    preco1 = 'R$ 792,57';
} else if (idade <= 53) {
    preco1 = 'R$ 866,88';
} else if (idade <= 58) {
    preco1 = 'R$ 1.071,10';
} else {
    preco1 = 'R$ 1.800,43';
}

        card1.innerHTML = `
            <img src="assets/Porto_logo.jpg" height="160px"> <br>
            <h1 style="color: gold;">Ouro PRO</h1> <br>
            <h2>Hospital ref: <span style="color: whitesmoke;"> Oswaldo Cruz </span> <br>
            <h2>Preço: <span style="color: whitesmoke;">R$ ${preco1}</span></h2>`

        if (nome == "" || celular == "" || email == "" || mensagem == "" || idade == "") {
            alert("Preencha todos os campos!");
            return;
        }

        //Fetch para enviar o lead

         fetch("/leads/cadastrar", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        // crie um atributo que recebe o valor recuperado aqui
        // Agora vá para o arquivo routes/leads.js
        nomeServer: nome,
        celularServer: celular,
        emailServer: email,
        mensagemServer: mensagem,
        idadeServer: idade,
      }),
    })
    .then(response => {
        if (response.ok) {
            alert("Cotação enviada com sucesso!");
        } else {
            response.text().then(texto => {
                alert("Erro ao enviar cotação: " + texto);
            });
        }
    })
    .catch(error => {
        alert("Erro de conexão com o servidor!");
        console.error(error);
    });
}
</script>